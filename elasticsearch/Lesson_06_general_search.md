# Поиск

Существует два метода поиска: строка параметров и тело запроса.
Далее мы всегда будем использовать поиск с помощью тела запроса.

    Для поиска используется так называемый DSL

Поиск с помощью строки параметров:
```http request
GET /{index_name}/_search?q=field:text
```

Поиск с помощью тела запроса:
```http
GET /{index_name}/_search
{
  "query": {
    "match": {
      "{FIELD}": "{TEXT}"
    }
  }
}
```

## Результат поиска

```json
{
  "took" : 0,
  "timed_out" : false,
  "_shards" : {
    "total" : 1,
    "successful" : 1,
    "skipped" : 0,
    "failed" : 0
  },
  "hits" : {
    "total" : {
      "value" : 1,
      "relation" : "eq"
    },
    "max_score" : 0.9808291,
    "hits" : [
      {
        "_index" : "products",
        "_type" : "_doc",
        "_id" : "QmApW3wBEeaRWyg6pnAi",
        "_score" : 0.9808291,
        "_source" : {
          "name" : "Alex",
          "role" : "Dev",
          "age" : 27
        }
      }
    ]
  }
}
```

`took` - время запроса в миллисекундах

`timed_out` - флаг, указывающий истекло ли время запроса или нет

`_shards` - кол-во использованных шардов при поиске, и их результат

`hits` - главное поле с результатом поиска


Разберём объект `hits`:

`total` - кол-во найденных документов

`hits` - массив, содержащий свойства каждого отдельного документа. По умолчанию возвращается всего 10 результатов

`max_score` - максимальная оценка соответствия поискового результата критериям поиска. По умолчанию документы сортируются по оценке `score`

Рассмотрим отдельный объект массива `hits`, то есть свойства отдельного документа:

`_index` - индекс

`_type` - тип документа, по умолчанию `_doc`

`_id` - id документа

`_score` - оценка, насколько подходит результат поиска под критерии поиска

`_source` - исходные данные документа
