# Логические запросы

В elasticsearch это запросы, аналогичные условиям and/or в SQL
С помощью логических запросов можно так же составлять сложные условия по and/or.

    Bool запросы чуть сложнее, чем where в sql, поскольку учитывают релевантность

Структура bool запроса:
```http
GET /recipes/_search
{
  "query": {
      "bool": {
        "must": [],
        "must_not": [],
        "should": [],
        "filter": []
      }
    }
  }
}
```

Внутри массивов `must`, `must_not`, `should` и т.д. содержатся запросы, изученные ранее: `match`, `term`, etc.

`mast` - содержит `and` запросы

`must_not` - содержит `not` запросы

`should` - содержит `or` запросы

`filter` - содержит запросы на соответствие, но без учёта релевантности

Пример, выберем рецепты, где есть ингредиент пармезан И время приготовления меньше 15 минут:

```http
GET /recipes/_search
{
  "query": {
      "bool": {
        "must": [
          {
            "match": {
              "ingredients.name": "parmesan"
            }
          },
          {
            "range": {
              "preparation_time_minutes": {
                "lte": 15
              }
            }
          }
        ]
      }
    }
  }
}
```

Если в bool запросе находится только один `should`, то это не значит, что выберутся все документы.
Значимость `should` повышается, и теперь запрос не `or`, а обязательный. То есть выберутся все документы,
в которых точно будет содержаться запрос из `should`.
